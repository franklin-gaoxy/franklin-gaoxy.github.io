# python虚拟环境

## venv

内置于python,轻量简单

### 安装

```shell
sudo apt update
sudo apt install python3 python3-venv
```

接下来即可使用:

```shell
# 创建虚拟环境
python3 -m venv myenv
```

这将在当前目录下创建一个 myenv的目录

进入虚拟环境

```shell
source myenv/bin/activate
```

> 进入虚拟环境后即可自由安装各种pip包

退出虚拟环境

```shell
deactivate
```







## Conda

功能强大,支持多种语言,适合复杂项目,甚至能隔离python版本

conda默认提供了一些软件包的安装,如果没有还可以使用pip进行安装,pip安装的软件包同样是隔离的

### 安装

[Installing on Linux Anaconda documentation](https://docs.anaconda.com/anaconda/install/linux/)

[下载anaconda](https://www.anaconda.com/download)

[Anaconda 所有包版本页面](https://repo.anaconda.com/archive/)

```shell
curl -OL curl -OL https://repo.anaconda.com/archive/Anaconda3-2024.06-1-Linux-x86_64.sh
```

安装所需包

```shell
apt-get install libgl1-mesa-glx libegl1-mesa libxrandr2 libxrandr2 libxss1 libxcursor1 libxcomposite1 libasound2 libxi6 libxtst6
```

开始安装:

```shell
bash Anaconda3-2024.06-1-Linux-x86_64.sh
# 按下ENTER查看许可协议 q退出 输入yes同意
# 确认安装位置 默认在当前路径下(直接回车) 或者输入一个其他位置 如/data/anaconda
# 是否添加到shell 输入yes
```

最后显示`Thank you for installing Anaconda3!`安装完成.

```shell
source ~/.bashrc
```

> 如果添加了shell 那么接下来每次进入回话都会在命令提示符前面加上当前的conda环境
> 
> 如果希望每次不要打开,那么执行
> 
> ```shell
> conda config --set auto_activate_base False
> ```
> 
> 或者修改为True开启
> 
> ```shell
> conda config --set auto_activate_base False
> ```

> 如果关闭后希望进入conda
> 
> ```shell
> source /data/anaconda/bin/activate
> ```

### 使用

创建一个环境

```shell
conda create -n test1
```

> 需要输入y来确定包

##### 创建环境时安装上对应的包

如果希望在创建时添加包

```shell
conda create -n test2 python pandas numpy
```

##### 创建环境时安装指定版本的

```shell
conda create -n myenv python=3.9
```

##### 从文件创建

```shell
conda env create -f environment.yml
```

查看所有环境

```shell
conda info --envs
```

```shell
(base) root@debian:~# conda info --envs
# conda environments:
#
base                  *  /data/anaconda
test1                    /data/anaconda/envs/test1
test2                    /data/anaconda/envs/test2
```

> \* 表示当前位于的环境



### 切换和退出环境

切换

```shell
conda activate test1
```

退出

```shell
conda deactivate
```

查看支持的所有包

```shell
conda search
```

查找对应的包所有的版本

```shell
conda search scipy
```

安装到指定的环境

```shell
conda install --name [venv name] [package name]
# demo
conda install --name myenv scipy
```

> 如果不指定 --name 那么默认安装在当前环境

查看当前环境的安装的软件包

```shell
conda list
# 查看其他环境的包
conda list -n [venv name]
```

删除一个包

```shell
conda remove scipy
```



### 管理python

不同的conda环境还可以安装不同版本的python 而且十分简单

```shell
conda install python=3.8.10
```

```shell
(test1) root@debian:~# python                                                                 
Python 3.8.10 (default, Jun  4 2021, 15:09:15) 
[GCC 7.5.0] :: Anaconda, Inc. on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> exit()
(test1) root@debian:~# 
```














