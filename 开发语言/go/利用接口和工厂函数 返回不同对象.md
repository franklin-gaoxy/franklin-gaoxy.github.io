# 利用接口和工厂函数 返回不同对象

在支持面向对象编程的语言里,函数通常可以返回一个Object(对象),然后接收这个对象即可调用其方法.返回的对象不同,调用的方法也不同.

## go语言的实现

目录结构

```
主目录
└─app
    ├─ go.mod
    ├─ main.go
    └─utils
         ├─ carfile.go
         └─ utils.go
```

GOPATH 为 主目录.

> 如下代码.
>  
> 实现了通过判断当前系统返回不同的结构体.
>  
> 结构体共有两个 一个windows 一个linux 两个都实现了OS这个接口.所以ReturnOS返回的是一个OS接口类型的数据.
>  
> 每个结构体都有GetPath这个方法.该方法返回的是一个路径.windows和linux两个系统返回的路径是不同的.
>  
> 所以在main函数中,如果想向一个文件写入数据,不用再去操心不同系统的路径不同,直接接收一下os.GetPath()函数返回值即可.


main.go文件

```go
package main

import (
	"app/utils"
	"fmt"
)

func main() {
	var os utils.OS
	os = utils.ReturnOS()
	// 调用接口 根据接口返回内容 可以获取到不同值的变量
	fmt.Printf("result path is %v", os.GetPath())
}
```

utils.go文件

```go
package utils

type OS interface {
	// GetPath 函数 并且需要返回一个string类型的数据
	// 如果没有返回值 则写作 GetPath()
	GetPath() string
}

// windows 结构体
type windows struct {
}

func (this *windows) GetPath() string {
	return "C:\\windows\\"
}

// linux 结构体
type linux struct {
}

func (this *linux) GetPath() string {
	return "/root/linux/"
}

// 工厂模式 此函数会判断系统类型 然后返回不同的对象
func ReturnOS() OS {
	// 模拟系统为windows
	var os string = "windows"
	if os == "windows" {
		return &windows{}
	} else {
		return &linux{}
	}
}
```
